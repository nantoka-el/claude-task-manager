#!/bin/bash
# 新しいタスクを正しい命名規則で作成

if [ $# -lt 2 ]; then
    echo "Usage: ./scripts/new-task.sh <task_number> <task_name>"
    echo "Example: ./scripts/new-task.sh 001 csv_loader_implementation"
    exit 1
fi

TASK_NUM=$1
TASK_NAME=$2
TASK_FILE="docs/logs/tasks/${TASK_NUM}_${TASK_NAME}_todo.md"

cat > "$TASK_FILE" << EOF
# タスク${TASK_NUM}: ${TASK_NAME}
作成日時: $(date "+%Y-%m-%d %H:%M:%S")
ステータス: TODO

## 📌 ユーザーの要求（原文）
\`\`\`
ここにユーザーが言った言葉をそのままコピペする
省略は絶対禁止！文脈も含めて全部記録
\`\`\`

## 🎯 なぜ必要か（背景）
### 解決したい問題
- 

### なぜ今やる必要があるか
- 

### 期待される効果・価値
- 

## 📦 何を実装するか（具体的に）
### 追加する機能
- [ ] 
- [ ] 

### 変更する機能
- [ ] 
- [ ] 

### 削除する機能
- [ ] 

### 影響を受けるファイル
- \`src/xxx.ts\` (L10-20): 理由
- \`src/yyy.tsx\` (L30-40): 理由

## 🔧 どうやって実装するか（技術詳細）
### 使用する技術/ライブラリ
- 

### アルゴリズム/ロジック
\`\`\`
詳細な実装方法をここに記述
\`\`\`

### 検討した代替案
- 案1: XXX → 却下理由: 
- 案2: YYY → 却下理由: 

## 📝 実装ログ（随時更新）
### $(date "+%Y-%m-%d %H:%M")
- タスク作成

### 実装開始時に記録
- 何から始めたか
- 最初の課題

### 問題発生時に記録
- エラー内容
- 解決方法

## ✅ 完了条件
- [ ] 機能要件1
- [ ] 機能要件2
- [ ] テスト作成
- [ ] テスト通過
- [ ] ドキュメント更新

## 🔗 関連情報
### 依存するタスク
- 

### 参考資料・URL
- 

### 関連するissue/PR
- 

## 🎓 完了後の振り返り（完了時に記入）
### 実際の結果
- 

### 学んだこと
- 

### 次への改善点
- 

---
⚠️ **このテンプレートのすべての項目を埋めること。「後で書く」は禁止。**
EOF

echo "✅ Created: $TASK_FILE"